---
title: API授权流程
date: 2024-02-23 17:05:56
permalink: /pages/jd4373/
---
# 知会

所有应用程序接口调用都要求您事先在aiM18平台注册并获得授权。

## 注册应用程序

在 aiM18平台的[应用授权列表]模块注册你的应用程序，得到Client ID 和 Client Secret。

![oauth1](/zh/assets/erp/oauth1.png)

## 获取访问令牌

通过使用Client ID、Client Secret以及可以正常登录到aiM18的用户账号和密码来获取访问令牌(access_token)。

(请注意：密码需要用SHA1进行加密)

![oauth2](/zh/assets/erp/oauth2.png)

![oauth3](/zh/assets/erp/oauth3.png)

欲了解更多详情，请查看 [aiM18 访问授权](/pages/2ffa7b/)

# EBI

## 获取formatId

A.    描述

1. 查询aiM18所有EBI的格式列表，便于后续EBI API的使用。

B.    详情

1. 请求URL

| URL          | http://[server]/jsf/rfws/ebiWidget/reportList |
| ------------ | --------------------------------------------- |
| HTTP Method | GET                                           |
| Encode     | UTF-8                                         |

 

2. 请求参数

| Parameter          | Type           | Required | Remarks                           |
| ------------- | -------------- | ---- | ------------------------------ |
| authorization | String(Header) | Yes   | Access Token obtained via Oauth2        |
| client_id     | String(Header) | Yes   | Client ID from [OAuth Applications], generated by the aiM18 |
| formatType    | String(Query)  | Yes   | ebiFormat/chart/pivot          |
| searchText    | String(Query)  | No   | For keyword search                 |
| offset        | int(Query)     | No   | Resultset offset : start index               |
| rows          | int(Query)     | No   | Resultset offset : end index               |

3. 请求示例

a.  Header 参数

![ebi1](/zh/assets/erp/ebi1.png)

b.  Query 参数

![ebi2](/zh/assets/erp/ebi2.png)

4. 返回示例

![ebi3](/zh/assets/erp/ebi3.png)