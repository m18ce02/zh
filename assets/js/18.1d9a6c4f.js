(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{348:function(t,_,v){"use strict";v.r(_);var r=v(8),e=Object(r.a)({},(function(){var t=this,_=t._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("p",[_("code",[t._v("版本: 1.0 | 发布日期: 30/6/2023")])]),t._v(" "),_("h2",{attrs:{id:"oauth-2-0-协议"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#oauth-2-0-协议"}},[t._v("#")]),t._v(" OAuth 2.0 协议")]),t._v(" "),_("p",[t._v("aiM18 上的Web服务访问授权是基于 OAuth 2.0 协议，详情请参见 "),_("em",[t._v("http://oauth.net/2/")]),t._v(".")]),t._v(" "),_("h2",{attrs:{id:"aim18-中的授权应用程序"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#aim18-中的授权应用程序"}},[t._v("#")]),t._v(" aiM18 中的授权应用程序")]),t._v(" "),_("p",[t._v("对于任何需要调用 aiM18 Web服务的第三方应用程序，该应用程序必须在 aiM18 的[授权应用列表]中注册：")]),t._v(" "),_("p",[_("img",{attrs:{src:"/zh/assets/oauthregister.jpg",alt:"register"}})]),t._v(" "),_("p",[t._v("Client ID 和 Client Secret 将在保存记录后生成。")]),t._v(" "),_("h2",{attrs:{id:"授权模式"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#授权模式"}},[t._v("#")]),t._v(" 授权模式")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[_("strong",[t._v("授权模式")])]),t._v(" "),_("th",[t._v("第三方应用程序需满足的条件")]),t._v(" "),_("th",[t._v("用户授权")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("授权码")]),t._v(" "),_("td",[t._v("需要Web服务器，如 JBoss 或 Tomcat")]),t._v(" "),_("td",[t._v("需要对每个用户进行独立授权")])]),t._v(" "),_("tr",[_("td",[t._v("隐式授权模式")]),t._v(" "),_("td",[t._v("不需要有Web服务器，如一些移动应用程序")]),t._v(" "),_("td",[t._v("需要对每个用户进行独立授权")])]),t._v(" "),_("tr",[_("td",[t._v("资源所有者密码凭证授权")]),t._v(" "),_("td",[t._v("第三方应用程序需要知道 aiM18 用户的用户名和密码")]),t._v(" "),_("td",[t._v("无需用户操作")])])])]),t._v(" "),_("p",[t._v("对于第一种和第二种授权模式，第三方应用程序不知道 aiM18 用户的用户名和密码，但需要对每个用户进行独立的身份验证（登录）。")]),t._v(" "),_("h3",{attrs:{id:"模式-1-授权码模式"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#模式-1-授权码模式"}},[t._v("#")]),t._v(" 模式 1: 授权码模式")]),t._v(" "),_("p",[t._v("授权码模式是 3 种授权模式中最完整、流程最严格的一种。其主要特点是使用第三方程序的后台服务器与 aiM18 验证服务器进行交互。")]),t._v(" "),_("blockquote",[_("p",[t._v("授权码模式的交互流程\n"),_("img",{attrs:{src:"/zh/assets/authorizationCode.png",alt:"authorizationCode"}})])]),t._v(" "),_("h4",{attrs:{id:"授权-url"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#授权-url"}},[t._v("#")]),t._v(" 授权 URL")]),t._v(" "),_("p",[_("code",[t._v("GET http://[server]/jsf/rfws/oauth/entry")])]),t._v(" "),_("h4",{attrs:{id:"授权参数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#授权参数"}},[t._v("#")]),t._v(" 授权参数")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("名字")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("response_type")]),t._v(" "),_("td",[_("code",[t._v("String")]),t._v("("),_("em",[t._v("Query")]),t._v(")")]),t._v(" "),_("td",[t._v("**必填.**值必须为“code”")])]),t._v(" "),_("tr",[_("td",[t._v("client_id")]),t._v(" "),_("td",[_("code",[t._v("String")]),t._v("("),_("em",[t._v("Query")]),t._v(")")]),t._v(" "),_("td",[t._v("**必填.**aiM18上注册的Client ID")])]),t._v(" "),_("tr",[_("td",[t._v("redirect_uri")]),t._v(" "),_("td",[_("code",[t._v("String")]),t._v("("),_("em",[t._v("Query")]),t._v(")")]),t._v(" "),_("td",[t._v("**必填.**在 aiM18 上注册的授权回调地址")])])])]),t._v(" "),_("h4",{attrs:{id:"访问令牌-url"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#访问令牌-url"}},[t._v("#")]),t._v(" 访问令牌 URL")]),t._v(" "),_("p",[_("code",[t._v("GET http://[server]/jsf/rfws/oauth/token")])]),t._v(" "),_("h4",{attrs:{id:"访问令牌参数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#访问令牌参数"}},[t._v("#")]),t._v(" 访问令牌参数")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("名字")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("grant_type")]),t._v(" "),_("td",[_("code",[t._v("String")]),t._v("("),_("em",[t._v("Query")]),t._v(")")]),t._v(" "),_("td",[t._v('**必填.**值可以是 "authorization_code" 或 "refresh_token"')])]),t._v(" "),_("tr",[_("td",[t._v("client_id")]),t._v(" "),_("td",[_("code",[t._v("String")]),t._v("("),_("em",[t._v("Query")]),t._v(")")]),t._v(" "),_("td",[t._v("**必填.**aiM18上注册的Client ID")])]),t._v(" "),_("tr",[_("td",[t._v("client_secret")]),t._v(" "),_("td",[_("code",[t._v("String")]),t._v("("),_("em",[t._v("Query")]),t._v(")")]),t._v(" "),_("td",[t._v("**必填.**aiM18上注册的Client Secret")])]),t._v(" "),_("tr",[_("td",[t._v("code")]),t._v(" "),_("td",[_("code",[t._v("String")]),t._v("("),_("em",[t._v("Query")]),t._v(")")]),t._v(" "),_("td",[t._v("使用 授权 URL 从 aiM18 获取的授权码")])]),t._v(" "),_("tr",[_("td",[t._v("redirect_uri")]),t._v(" "),_("td",[_("code",[t._v("String")]),t._v("("),_("em",[t._v("Query")]),t._v(")")]),t._v(" "),_("td",[t._v("**必填.**在 aiM18 上注册的授权回调地址")])]),t._v(" "),_("tr",[_("td",[t._v("refresh_token")]),t._v(" "),_("td",[_("code",[t._v("String")]),t._v("("),_("em",[t._v("Query")]),t._v(")")]),t._v(" "),_("td",[t._v("用于获取访问令牌的刷新令牌")])])])]),t._v(" "),_("h3",{attrs:{id:"模式-2-隐式授权模式"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#模式-2-隐式授权模式"}},[t._v("#")]),t._v(" 模式 2: 隐式授权模式")]),t._v(" "),_("p",[t._v("不涉及第三方应用程序的后台服务器，访问令牌直接从用户浏览器请求到 aiM18 服务器。因此，返回的访问令牌对用户是可见的（直接显示在返回的 URL 中）。 请注意，在此授权模式中不返回刷新令牌。")]),t._v(" "),_("blockquote",[_("p",[t._v("隐式授权模式的交互流程\n"),_("img",{attrs:{src:"/zh/assets/Implicit_Grant_Type.png",alt:"Implicit Grant Type"}})])]),t._v(" "),_("h4",{attrs:{id:"访问令牌-url-2"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#访问令牌-url-2"}},[t._v("#")]),t._v(" 访问令牌 URL")]),t._v(" "),_("p",[_("code",[t._v("GET http://[server]/jsf/rfws/oauth/entry")])]),t._v(" "),_("h4",{attrs:{id:"访问令牌参数-2"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#访问令牌参数-2"}},[t._v("#")]),t._v(" 访问令牌参数")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("名字")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("response_type")]),t._v(" "),_("td",[_("code",[t._v("String")]),t._v("("),_("em",[t._v("Query")]),t._v(")")]),t._v(" "),_("td",[t._v('**必填.**值必须为"token"')])]),t._v(" "),_("tr",[_("td",[t._v("client_id")]),t._v(" "),_("td",[_("code",[t._v("String")]),t._v("("),_("em",[t._v("Query")]),t._v(")")]),t._v(" "),_("td",[t._v("**必填.**aiM18上注册的Client ID")])]),t._v(" "),_("tr",[_("td",[t._v("redirect_uri")]),t._v(" "),_("td",[_("code",[t._v("String")]),t._v("("),_("em",[t._v("Query")]),t._v(")")]),t._v(" "),_("td",[t._v("**必填.**在 aiM18 上注册的授权回调地址")])])])]),t._v(" "),_("h3",{attrs:{id:"模式-3-资源所有者密码凭证授权"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#模式-3-资源所有者密码凭证授权"}},[t._v("#")]),t._v(" 模式 3: 资源所有者密码凭证授权")]),t._v(" "),_("p",[t._v("在资源所有者密码凭证授权模式中，aiM18 用户需要向第三方应用程序提供用户名和密码。应用程序使用这些信息直接向 aiM18 申请授权。")]),t._v(" "),_("blockquote",[_("p",[t._v("资源所有者密码凭证授权模式的交互流程\n"),_("img",{attrs:{src:"/zh/assets/password.png",alt:"password"}})])]),t._v(" "),_("h4",{attrs:{id:"访问令牌-url-3"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#访问令牌-url-3"}},[t._v("#")]),t._v(" 访问令牌 URL")]),t._v(" "),_("p",[_("code",[t._v("GET http://[server]/jsf/rfws/oauth/token")])]),t._v(" "),_("h4",{attrs:{id:"访问令牌参数-3"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#访问令牌参数-3"}},[t._v("#")]),t._v(" 访问令牌参数")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("名字")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("grant_type")]),t._v(" "),_("td",[_("code",[t._v("String")]),t._v("("),_("em",[t._v("Query")]),t._v(")")]),t._v(" "),_("td",[t._v('**必填.**值必须为 "password"')])]),t._v(" "),_("tr",[_("td",[t._v("client_id")]),t._v(" "),_("td",[_("code",[t._v("String")]),t._v("("),_("em",[t._v("Query")]),t._v(")")]),t._v(" "),_("td",[t._v("**必填.**aiM18上注册的Client ID")])]),t._v(" "),_("tr",[_("td",[t._v("client_secret")]),t._v(" "),_("td",[_("code",[t._v("String")]),t._v("("),_("em",[t._v("Query")]),t._v(")")]),t._v(" "),_("td",[t._v("**必填.**aiM18上注册的Client Secret")])]),t._v(" "),_("tr",[_("td",[t._v("username")]),t._v(" "),_("td",[_("code",[t._v("String")]),t._v("("),_("em",[t._v("Query")]),t._v(")")]),t._v(" "),_("td",[t._v("**必填.**aiM18用户的用户名")])]),t._v(" "),_("tr",[_("td",[t._v("password")]),t._v(" "),_("td",[_("code",[t._v("String")]),t._v("("),_("em",[t._v("Query")]),t._v(")")]),t._v(" "),_("td",[t._v("**必填.**aiM18用户的密码。密码必须经过 SHA1 哈希处理")])])])]),t._v(" "),_("p",[t._v("这种授权方式通常用于 API 集成。如需了解更多信息，请参阅 "),_("RouterLink",{attrs:{to:"/pages/jd4373/#获取访问令牌"}},[t._v("此示例")]),t._v(".")],1),t._v(" "),_("h3",{attrs:{id:"api-细粒度控制"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#api-细粒度控制"}},[t._v("#")]),t._v(" API 细粒度控制")]),t._v(" "),_("p",[t._v("aiM18 的数据由多个模块组成，每个模块提供创建、更新、读取、删除等基本 API 以及其他 API。您可以分别为基本 API 和其他 API 设置权限控制。详细控制原则请参阅程序。")]),t._v(" "),_("h4",{attrs:{id:"curd-控制"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#curd-控制"}},[t._v("#")]),t._v(" CURD 控制")]),t._v(" "),_("p",[t._v("开发者通过设置check_right参数决定是否检查模块权限，如果参数为空白，默认不检查权限。\n"),_("img",{attrs:{src:"/zh/assets/ct1.png",alt:"ct1"}})]),t._v(" "),_("p",[t._v("模块的增删读写(CURD)接口默认检查相应请求用户的模块权限。\n"),_("img",{attrs:{src:"/zh/assets/ct2.png",alt:"ct2"}})]),t._v(" "),_("h4",{attrs:{id:"其他控制"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#其他控制"}},[t._v("#")]),t._v(" 其他控制")]),t._v(" "),_("p",[t._v("如果你想要严格控制第三方应用程序可以访问的API(和数据)，则不推荐使用此设置。\n"),_("img",{attrs:{src:"/zh/assets/ct3.png",alt:"ct3"}})]),t._v(" "),_("p",[t._v("你可以为每个 API 分别设置访问控制规则。\n"),_("img",{attrs:{src:"/zh/assets/ct4.png",alt:"ct4"}})])])}),[],!1,null,null,null);_.default=e.exports}}]);